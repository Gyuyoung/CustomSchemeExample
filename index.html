<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title>Web Protocol Handler Sample - Register</title>
    <script type="text/javascript">
        if (window.navigator.registerProtocolHandler) {
            console.log('PASS window.navigator.registerProtocolHandler is defined.');
        } else {
            console.log('FAIL window.navigator.registerProtocolHandler is not defined.');
        }

        window.navigator.registerProtocolHandler("web+github",
                                                 "https://gyuyoung.github.io/CustomSchemeExample/%s",
                                                 "github handler");
    </script>
</head>
<body>
    <h1>Web Protocol Handler Sample</h1>
    <p>This web page is a demo to show how does navigator.registerProtocolHandler work.
       This page installed <b>web+github custom protocol</b> through registerProtocolHandler with a below code.
    </p>
    <p> The HTML 5.2 specification is <a href="https://www.w3.org/TR/html52/webappapis.html#dom-navigatorcontentutils-isprotocolhandlerregistered">https://www.w3.org/TR/html52/webappapis.html#dom-navigatorcontentutils-isprotocolhandlerregistered</a></p>
    <div>
    <table>
    <code><b>
        window.navigator.registerProtocolHandler("web+github",
                                                 "https://gyuyoung.github.io/CustomSchemeExample/%s",
                                                 "github handler");
    </b></code>
    </table>
    </div>
    <p>If you click this link, it runs <code><b>web+github:</b></code> protocol: <a href="web+github:gyuyoung">this</a> </p>
    <p> [After registerProtocolHandler] web+github protol is </p>
    <script>
        if (window.navigator.isProtocolHandlerRegistered) {
            console.log('PASS window.navigator.isProtocolHandlerRegistered is defined.');
        } else {
            console.log('FAIL window.navigator.isProtocolHandlerRegistered is not defined.');
        }
        var result = window.navigator.isProtocolHandlerRegistered("web+github",
                                                                  "https://gyuyoung.github.io/CustomSchemeExample/%s");
        document.write("* result after registerProtocolHandler = " + result);
    </script>
 
    <!-- Check if isProtocolHandlerRegistered works well after calling unregisterProtocolHandler  -->
    <p>Now is time to test unregisterProtocolHandler for <code><b>web+github:</b></code></p>
    <code><b>
        window.navigator.unregisterProtocolHandler("web+github",
                                                   "https://gyuyoung.github.io/CustomSchemeExample/%s", "title");
    </b></code>
    <p> [After unregisterProtocolHandler] web+github protol is </p>
    <script>
        // Test unregisterProtocolHandler.
        window.navigator.unregisterProtocolHandler("web+github",
                                                   "https://gyuyoung.github.io/CustomSchemeExample/%s");
        var result2 = window.navigator.isProtocolHandlerRegistered("web+github",
                                                              "https://gyuyoung.github.io/CustomSchemeExample/%s");
        document.write("* result after unregisterProtocolHandler = " + result2);
    </script>
</body>
</html>
